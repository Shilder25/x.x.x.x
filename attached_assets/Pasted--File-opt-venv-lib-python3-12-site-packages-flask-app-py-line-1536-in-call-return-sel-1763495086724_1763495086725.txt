  File "/opt/venv/lib/python3.12/site-packages/flask/app.py", line 1536, in __call__
    return self.wsgi_app(environ, start_response)
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/flask/app.py", line 1511, in wsgi_app
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/app/api.py", line 1062, in trigger_cycle
  File "/opt/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    results = engine.run_daily_cycle()
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/autonomous_engine.py", line 157, in run_daily_cycle
    firm_result = self._process_firm_multi_category_cycle(firm_name, events_by_category)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/autonomous_engine.py", line 313, in _process_firm_multi_category_cycle
    evaluation = self._evaluate_event_opportunity(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/autonomous_engine.py", line 444, in _evaluate_event_opportunity
    prediction = self._get_firm_prediction(firm_name, event_description, symbol or '', market_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/autonomous_engine.py", line 950, in _get_firm_prediction
    prediction = firm.generate_prediction(prompt)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
  File "/app/llm_clients.py", line 131, in generate_prediction
    do = self.iter(retry_state=retry_state)
    response = self.client.chat.completions.create(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
  File "/opt/venv/lib/python3.12/site-packages/openai/_utils/_utils.py", line 286, in wrapper
           ^^^^^^^^^^^^^^^^^^^
    result = action(retry_state)
    return func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/root/.nix-profile/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
  File "/opt/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 400, in <lambda>
    raise self._exception
    self._add_action_func(lambda rs: rs.outcome.result())
  File "/opt/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
                                     ^^^^^^^^^^^^^^^^^^^
    result = fn(*args, **kwargs)
  File "/root/.nix-profile/lib/python3.12/concurrent/futures/_base.py", line 449, in result
             ^^^^^^^^^^^^^^^^^^^
    return self.__get_result()
  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 1014, in _send_single_request
               ^^^^^^^^^^^^^^^^^^^^^^^^^
           ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 942, in _send_handling_auth
  File "/opt/venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py", line 1156, in create
    response = self._send_handling_redirects(
    return self._post(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
           ^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
  File "/opt/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1259, in post
    response = self._send_single_request(request)
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/openai/_base_client.py", line 982, in request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 177, in _receive_response_headers
    response = transport.handle_request(request)
    return self._connection.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 250, in handle_request
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    resp = self._pool.handle_request(req)
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 136, in handle_request
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc
    raise exc from None
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 106, in handle_request
    response = connection.handle_request(
    ) = self._receive_response_headers(**kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/connection.py", line 103, in handle_request
    event = self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 217, in _receive_event
    data = self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/httpcore/_backends/sync.py", line 128, in read
    return self._sock.recv(max_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.nix-profile/lib/python3.12/ssl.py", line 1232, in recv
    return self.read(buflen)
           ^^^^^^^^^^^^^^^^^
  File "/root/.nix-profile/lib/python3.12/ssl.py", line 1105, in read
    return self._sslobj.read(len)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.12/site-packages/gunicorn/workers/base.py", line 204, in handle_abort
    sys.exit(1)
SystemExit: 1
100.64.0.2 - - [18/Nov/2025:18:55:08 +0000] "POST /admin/trigger-cycle HTTP/1.1" 500 0 "-" "-"
[2025-11-18 18:55:08 +0000] [590] [INFO] Worker exiting (pid: 590)
[2025-11-18 18:55:08 +0000] [683] [INFO] Booting worker with pid: 683
[DEBUG] RAILWAY ENVIRONMENT VARIABLE CHECK - API.PY STARTUP
================================================================================
OPINION_TRADE_API_KEY: SET (len=32)
OPINION_WALLET_PRIVATE_KEY: SET (len=64)
RAILWAY_ENVIRONMENT: production
RAILWAY_SERVICE_NAME: keen-essence
================================================================================
================================================================================
[ORDER MONITOR] Triggered via API endpoint at 2025-11-18T19:00:01.739883
[2025-11-18 19:00:01] [INFO] [BANKROLL MODE] TEST - Initial: $50.0, Daily limit: $5.0
[2025-11-18 19:00:01] [INFO] [INFO] ✓ Opinion.trade SDK initialized (wallet: 0x43C9bAd451ed65b5268cec681FCe42AdA00Fc675)
[2025-11-18 19:00:02] [ERROR] [ERROR] OrderMonitor - Failed to fetch orders: Unexpected error
100.64.0.3 - - [18/Nov/2025:19:00:02 +0000] "POST /api/monitor-orders HTTP/1.1" 200 158 "-" "Mozilla/4.0 (compatible; cron-job.org; http://cron-job.org/abuse/)"
[ORDER MONITOR] Triggered via API endpoint at 2025-11-18T19:30:01.288603
[2025-11-18 19:30:01] [INFO] [BANKROLL MODE] TEST - Initial: $50.0, Daily limit: $5.0
100.64.0.4 - - [18/Nov/2025:19:30:02 +0000] "POST /api/monitor-orders HTTP/1.1" 200 158 "-" "Mozilla/4.0 (compatible; cron-job.org; http://cron-job.org/abuse/)"
[2025-11-18 19:30:01] [INFO] [INFO] ✓ Opinion.trade SDK initialized (wallet: 0x43C9bAd451ed65b5268cec681FCe42AdA00Fc675)
[2025-11-18 19:30:02] [ERROR] [ERROR] OrderMonitor - Failed to fetch orders: Unexpected error